(()=>{"use strict";const e=({formId:e,someElem:t=[]})=>{const a=document.getElementById(e),r=document.createElement("div");try{if(!a)throw new Error("Верните форму на место, пожалуйста!");a.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=a.querySelectorAll("input"),l=new FormData(a),n={};var u;l.forEach(((e,t)=>{n[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type&&"0"!==t.textContent?n[e.id]=t.textContent:"input"===e.type&&0!==t.value&&(n[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{"user_name"!==e.name||!/[^а-яА-Я ]/g.test(e.value)&&""!==e.value||(alert("Введите ваше имя на кириллице"),t=!1),"user_phone"!==e.name||/^[\+]?\(?([0-9]{4})\)?([-]?)([0-9]{3})\2([0-9]{4})+$/g.test(e.value)&&""!==e.value||(alert("Введите корректный номер телефона: 11 цифр начиная с кода"),t=!1),"user_email"!==e.name||!/[^a-zA-Z0-9@-_.!~*']/g.test(e.value)&&""!==e.value||(alert("Введите корректную адресную почту"),t=!1),"user_message"===e.name&&/[^а-яА-Я0-9 ,]/g.test(e.value)&&(t=!1)})),t})(e)?(r.textContent="Загрузка...",r.style.color="#fff",a.append(r),(u=n,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{r.textContent="Спасибо! Наш менеджер с вами свяжется!",e.forEach((e=>{e.value=""})),setTimeout((()=>{a.removeChild(r)}),2e3)})).catch((e=>{r.textContent="Ошибка..."}))):alert("Данные не валидны!!!")})()}))}catch(e){console.log(e.message)}};(function(e){const t=document.getElementById("timer-hours"),a=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds"),l=document.getElementsByClassName("timer-action")[0],n=()=>{let e=(()=>{let e=(new Date("15 March 2022").getTime()-(new Date).getTime())/1e3,t=Math.floor(e/3600),a=Math.floor(e/60%60),r=Math.floor(e%60);return e<0&&(e=0,t=0,a=0,r=0,l.textContent="Акция закончилась..."),{timeRemaning:e,hours:t,minutes:a,seconds:r}})();e.hours<10?t.textContent="0"+e.hours:t.textContent=e.hours,e.minutes<10?a.textContent="0"+e.minutes:a.textContent=e.minutes,e.seconds<10?r.textContent="0"+e.seconds:r.textContent=e.seconds,e.timeRemaning>0&&setTimeout(n,1e3)};n()})(),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),a=(t.querySelectorAll("ul>li>a"),()=>{t.classList.toggle("active-menu")});e.addEventListener("click",a),t.addEventListener("click",(e=>{console.dir(e.target),e.target.classList.contains("close-btn")&&a(),e.target.classList.contains("close-btn")||a()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),a=document.querySelectorAll(".popup-btn"),r=window.innerWidth;a.forEach((a=>{a.addEventListener("click",(()=>{e.style.display="block",r>768&&(({timing:e,draw:t,duration:a})=>{let r=performance.now();requestAnimationFrame((function l(n){let u=(n-r)/a;u>1&&(u=1);let o=e(u);t(o),u<1&&requestAnimationFrame(l)}))})({duration:400,timing:e=>e,draw(e){t.style.top=25*e+"%"}})}))})),e.addEventListener("click",(t=>{t.target.closest(".popup-content")&&!t.target.classList.contains("popup-close")||(e.style.display="none")}))})(),(()=>{const e=document.querySelectorAll("input.calc-item"),t=document.querySelector(".main-form"),a=t.querySelector("input[type=text]"),r=t.querySelector("input[type=tel]"),l=t.querySelector("input[type=email]"),n=document.querySelector(".footer-form"),u=n.querySelector("input[type=text]"),o=n.querySelector("input[type=tel]"),c=n.querySelector("input[type=email]"),g=n.querySelector("input.mess"),v=document.querySelector("#form3"),s=v.querySelector("input[type=text]"),i=v.querySelector("input[type=tel]"),d=v.querySelector("input[type=email]");a.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^а-яА-Я -]/g,"")})),a.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/ +/g," "),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/^(-)|^( )|[ ]$|[-]$/g,""),e.target.value=e.target.value.replace(/^[а-я](?=[а-я]{2})/g,(function(e){return e.toUpperCase()}))})),r.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^0-9()+-]/g,"")})),r.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/\++/g,"+"),e.target.value=e.target.value.replace(/^(-)|[+]$|[(]$|[)]$|[-]$/g,"")})),l.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^a-zA-Z0-9@_.!~*'-]/g,"")})),l.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\@+/g,"@"),e.target.value=e.target.value.replace(/\.+/g,"."),e.target.value=e.target.value.replace(/^(-)|[-]$/g,"")})),u.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^а-яА-Я -]/g,"")})),u.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/ +/g," "),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/^(-)|^( )|[ ]$|[-]$/g,""),e.target.value=e.target.value.replace(/^[а-я](?=[а-я]{2})/g,(function(e){return e.toUpperCase()}))})),o.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^0-9()+-]/g,"")})),o.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/\++/g,"+"),e.target.value=e.target.value.replace(/\)+/g,")"),e.target.value=e.target.value.replace(/\(+/g,"("),e.target.value=e.target.value.replace(/^(-)|[+]$|[(]$|[)]$|[-]$/g,"")})),c.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^a-zA-Z0-9@_.!~*'-]/g,"")})),c.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\@+/g,"@"),e.target.value=e.target.value.replace(/\.+/g,"."),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/^(-)|[.]$|[-]$/g,"")})),g.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^а-яА-Я -]/g,"")})),g.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/ +/g," "),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/^(-)|^( )|[ ]$|[-]$/g,"")})),s.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^а-яА-Я -]/g,"")})),s.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/ +/g," "),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/^(-)|^( )|[ ]$|[-]$/g,""),e.target.value=e.target.value.replace(/^[а-я](?=[а-я]{2})/g,(function(e){return e.toUpperCase()}))})),i.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^0-9()+-]/g,"")})),i.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/\++/g,"+"),e.target.value=e.target.value.replace(/^(-)|[+]$|[(]$|[)]$|[-]$/g,"")})),d.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^a-zA-Z0-9@_.!~*'-]/g,"")})),d.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\@+/g,"@"),e.target.value=e.target.value.replace(/\.+/g,"."),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/^(-)|[-]$/g,"")})),e.forEach((e=>{e.addEventListener("input",(e=>{e.preventDefault(),e.target.value=e.target.value.replace(/[^0-9]/g,"")}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{if(e.target.closest(".service-header-tab")){const r=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===r?(e.classList.add("active"),a[t].classList.remove("d-none")):(e.classList.remove("active"),a[t].classList.add("d-none"))}))}}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),a=document.querySelectorAll(".dot");let r,l=0;const n=(e,t,a)=>{e[t].classList.remove(a)},u=(e,t,a)=>{e[t].classList.add(a)},o=()=>{n(t,l,"portfolio-item-active"),n(a,l,"dot-active"),l++,l>=t.length&&(l=0),u(t,l,"portfolio-item-active"),u(a,l,"dot-active")},c=(e=1500)=>{r=setInterval(o,e)};e.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(n(t,l,"portfolio-item-active"),n(a,l,"dot-active"),e.target.matches("#arrow-right")?l++:e.target.matches("#arrow-left")?l--:e.target.classList.contains("dot")&&a.forEach(((t,a)=>{e.target===t&&(l=a)})),l>=t.length&&(l=0),l<0&&(l=t.length-1),u(t,l,"portfolio-item-active"),u(a,l,"dot-active"))})),e.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(r)}),!0),e.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&c(2e3)}),!0),c(2e3)})(),((e=100)=>{const t=document.querySelector(".calc-block"),a=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),l=document.querySelector(".calc-count"),n=document.querySelector(".calc-day"),u=document.getElementById("total");t.addEventListener("input",(t=>{t.target!==a&&t.target!==r&&t.target!==l&&t.target!==n||(()=>{const t=+a.options[a.selectedIndex].value,o=r.value;let c=0,g=1,v=1;l.value>1&&(g+=+l.value/10),n.value&&n.value<5?v=2:n.value&&n.value<10&&(v=1.5),c=a.value&&r.value?e*t*o*g*v:0,u.textContent=c})()}))})(100),e({formId:"form1",someElem:[{type:"block",id:"total"}]}),e({formId:"form2",someElem:[{type:"block",id:"total"}]}),e({formId:"form3",someElem:[{type:"block",id:"total"}]})})();